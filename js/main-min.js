function populateToText(e,t){$(e).val(t)}function createAtom(e,t,o,r){var n="";return n+='".'+o+'":\n   ',n+='"'+r+'":\n       ',n+='"prefix": "'+t+'"\n       ',n+='"body": """'+e+'""" \n       '}function createBrackets(e,t,o,r){var n=[],a={};return a.name=r,a.trigger=t,a.usage=o,a.description=r,a.template=e,n.push(a),JSON.stringify(n)}function createVisualCode(e,t,o,r){var n=new Object;n.prefix=t;var a=e.split("\n"),c="";$.each(a,function(e,t){console.log("body index: "+e+" value: "+t),c+=$.trim(t)+"\n"}),console.log("bodyContent? ",c),n.body=c.split("\n"),console.log("jsonObj body? ",n.body),n.description=r;var i=r,s={};return s[i]=n,JSON.stringify(s)}function createSublime(e,t,o,r){var n="<snippet><content><![CDATA["+e+"]]></content>";return n+="<tabTrigger>"+t+"</tabTrigger>",n+="<scope>"+o+"</scope>",n+="<description>"+r+"</description></snippet>"}function parseAtom(e){console.log("parseAtom snipText first char? ",e.charAt(0));var t=e.charAt(0);if('"'===t||"'"===t){console.log("firstChar is quotation! ",t);var o=new Object;e=$.trim(e),console.log("SnipText? ",e);var r=e.split("\n");console.log("snippet? ",r);for(var n=0;n<r.length;n++){var a=$.trim(r[n]);if(a.startsWith('"prefix"')){console.log("prefix row");var c=a.split(":");console.log("prefix: ",c),o.trigger=removeQuotes($.trim(c[1])),console.log("snipObj trigger? "+o.trigger+" i? "+n)}else if(n===r.length-1)if(r.length>4){for(var i="",s=3;s<r.length;s++){var l=r[s];console.log("contentRow? "+l+" idx? "+s),3===s?(l=l.split(":"),console.log("contentRow: ",l[1]),i+=$.trim(removeTripleQuotes(l[1]))):i+="\n"+removeTripleQuotes(l)}o.content=i,console.log("snipObj content? "+o.content+" i? "+n)}else{var c=$.trim(a).split(":");o.content=$.trim(removeTripleQuotes(c[1])),console.log("snipObj content? "+o.content+" i? "+n)}else if(1===n){console.log("index is 1!");var c=$.trim(a.replace(":",""));o.description=removeQuotes(c),console.log("snipObj description? "+o.description+" i? "+n)}else if(0===n){console.log("index is 2!");var c=$.trim(a.replace(":",""));o.scope=removeQuotes(c.replace(".","")),console.log("snipObj scope? "+o.scope+" i? "+n)}}return o}}function removeQuotes(e){return e.replace(/"/g,"").replace(/'/g,"")}function removeTripleQuotes(e){return e.replace('"""',"").replace('"""',"")}function parseBrackets(e){var t="";try{return console.log("IS valid json: ",""),JSON.parse(e)}catch(e){return void console.log("NOT valid json err: ",e)}}function parseVisualCode(e){var t="";try{return console.log("IS valid json: ",""),JSON.parse(e)}catch(e){return void console.log("NOT valid json err: ",e)}}function parseSublime(e){var t="";try{return console.log("IS valid xmlDoc"),t=$.parseXML(e),$(t)}catch(e){return void console.log("NOT valid xmlDoc err: ",e)}}function toggleInputError(e,t,o){console.log("toggleInputError: "+e+" show? "+t+" type? "+o),t?(o&&$("#error-link").prop("href","details.html#"+o),$(e).addClass("has-error"),$(e).find(".error-block").css("display","block")):($(e).removeClass("has-error"),$(e).find(".error-block").css("display","none"))}function smoothScroll(e){var t=$(e);if(t=t.length?t:$("[name="+e.slice(1)+"]"),t.length)return $("html,body").animate({scrollTop:t.offset().top-80},1e3),!1}$("#convert-from").on("change",function(){var e=$(this).val();console.log("selected? ",e);var t=$("#convert-to"),o=$('#convert-to option[value="'+e+'"]');console.log("toOpt? ",o),t.children().attr("disabled",!1),o.attr("disabled",!0),$(".format").hide(),t.val(""),"visual_code"===e?($(".scope-select").show(),$("select[name=scope_from]").attr("required",!0)):($(".scope-select").hide(),$("select[name=scope_from]").attr("required",!1),$("#format-"+e).show())}),$("#converter-form").submit(function(e){e.preventDefault(),toggleInputError("#from-fg",!1);var t=!1,o=$("select[name=convert_from]").val(),r=$("select[name=convert_to]").val(),n=$("textarea[name=convert_from_text]").val();if("atom"===o){var a=parseAtom(n);a?("sublime"===r&&populateToText("textarea[name=convert_to_text]",createSublime(a.content,a.trigger,a.scope,a.description)),"brackets"===r&&populateToText("textarea[name=convert_to_text]",createBrackets(a.content,a.trigger,a.scope,a.description)),"visual_code"===r&&populateToText("textarea[name=convert_to_text]",createVisualCode(a.content,a.trigger,a.scope,a.description))):(t=!0,toggleInputError("#from-fg",!0,"atom"))}if("sublime"===o){var c=parseSublime(n);if(c){var i=c.find("content"),s=c.find("tabTrigger"),l=c.find("scope"),p=c.find("description");"atom"===r&&populateToText("textarea[name=convert_to_text]",createAtom(i.text(),s.text(),l.text(),p.text())),"brackets"===r&&populateToText("textarea[name=convert_to_text]",createBrackets(i.text(),s.text(),l.text(),p.text())),"visual_code"===r&&populateToText("textarea[name=convert_to_text]",createVisualCode(i.text(),s.text(),l.text(),p.text()))}else t=!0,toggleInputError("#from-fg",!0,"sublime")}if("visual_code"===o){var u=parseVisualCode(n);if(u){var m;for(var v in u)m=u[v];var g="";$.each(m.body,function(e,t){g+=t+"\n"});var f=m.prefix,d=$("select[name=scope_from]").val(),x=m.description;"sublime"===r&&populateToText("textarea[name=convert_to_text]",createSublime(g,f,d,x)),"atom"===r&&populateToText("textarea[name=convert_to_text]",createAtom(g,f,d,x)),"brackets"===r&&populateToText("textarea[name=convert_to_text]",createBrackets(g,f,d,x))}else t=!0,toggleInputError("#from-fg",!0,"viscode")}if("brackets"===o){var b=parseBrackets(n);if(console.log("jsonBracObj? ",b),b){var h=b[0],T=h.template,_=h.trigger,y=h.usage,O=h.description;"sublime"===r&&populateToText("textarea[name=convert_to_text]",createSublime(T,_,y,O)),"atom"===r&&populateToText("textarea[name=convert_to_text]",createAtom(T,_,y,O)),"visual_code"===r&&populateToText("textarea[name=convert_to_text]",createVisualCode(T,_,y,O))}else t=!0,toggleInputError("#from-fg",!0,"brackets")}}),$('[type="submit"]').mouseenter(function(){console.log("Mouse!")}),$('a[href*="#"]:not([href="#"])').click(function(){location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")&&location.hostname!=this.hostname||smoothScroll(this.hash)});
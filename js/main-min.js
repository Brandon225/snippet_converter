function populateToText(e){$("textarea[name=convert_to_text]").val(e)}function createAtom(e,t,o,r){var a="";return a+='".'+o+'":\n   ',a+='"'+r+'":\n       ',a+='"prefix": "'+t+'"\n       ',a+='"body": """'+e+'""" \n       '}function createBrackets(e,t,o,r){var a=[],n={};return n.name=r,n.trigger=t,n.usage=o,n.description=r,n.template=e,a.push(n),JSON.stringify(a)}function createVisualCode(e,t,o,r){var a=new Object;a.prefix=t;var n=e.split("\n"),l="";$.each(n,function(e,t){console.log("body index: "+e+" value: "+t),l+=$.trim(t)+"\n"}),console.log("bodyContent? ",l),a.body=l.split("\n"),console.log("jsonObj body? ",a.body),a.description=r;var c=r,i={};return i[c]=a,JSON.stringify(i)}function createSublime(e,t,o,r){var a="<snippet><content><![CDATA["+e+"]]></content>";return a+="<tabTrigger>"+t+"</tabTrigger>",a+="<scope>"+o+"</scope>",a+="<description>"+r+"</description></snippet>"}function parseAtom(e){if(console.log("parseAtom snipText first char? ",e.charAt(0)),'"'===e.charAt(0)){console.log("firstChar is quotation! ",e);var t=new Object;e=e.replace(/"/g,"").replace(/'/,""),e=$.trim(e);for(var o=e.split("\n"),r=0;r<o.length;r++){var a=$.trim(o[r]);if(a.startsWith("prefix")){var n=$.trim(a.replace("prefix:","")),l=$.trim(a.replace(n,""));t.trigger=n}else if(r===o.length-1)if(o.length>4){for(var c="",i=3;i<o.length;i++){var s=o[i];c+=3===i?$.trim(s.replace("body:",""))+"\n":s+"\n"}t.content=c}else{var n=$.trim(a);t.content=n}else if(1===r){var n=$.trim(a.replace(":",""));t.description=n}else if(0===r){var n=$.trim(a.replace(":",""));t.scope=n.replace(".","")}}return t}}function parseBrackets(e){var t="";try{return console.log("IS valid json: ",""),JSON.parse(e)}catch(e){return void console.log("NOT valid json err: ",e)}}function parseVisualCode(e){var t="";try{return console.log("IS valid json: ",""),JSON.parse(e)}catch(e){return void console.log("NOT valid json err: ",e)}}function parseSublime(e){var t="";try{return console.log("IS valid xmlDoc"),t=$.parseXML(e),$(t)}catch(e){return void console.log("NOT valid xmlDoc err: ",e)}}function toggleInputError(e,t,o){console.log("toggleInputError: "+e+" show? "+t+" type? "+o),t?(o&&$("#error-link").prop("href","details.html#"+o),$(e).addClass("has-error"),$(e).find(".error-block").css("display","block")):($(e).removeClass("has-error"),$(e).find(".error-block").css("display","none"))}function smoothScroll(e){var t=$(e);if(t=t.length?t:$("[name="+e.slice(1)+"]"),t.length)return $("html,body").animate({scrollTop:t.offset().top-80},1e3),!1}$("#convert-from").on("change",function(){var e=$(this).val();console.log("selected? ",e);var t=$("#convert-to"),o=$('#convert-to option[value="'+e+'"]');console.log("toOpt? ",o),t.children().attr("disabled",!1),o.attr("disabled",!0),$(".format").hide(),t.val(""),"visual_code"===e?($(".scope-select").show(),$("select[name=scope_from]").attr("required",!0)):($(".scope-select").hide(),$("select[name=scope_from]").attr("required",!1),$("#format-"+e).show())}),$("#converter-form").submit(function(e){e.preventDefault(),toggleInputError("#from-fg",!1);var t=!1,o=$("select[name=convert_from]").val(),r=$("select[name=convert_to]").val(),a=$("textarea[name=convert_from_text]").val();if("atom"===o){var n=parseAtom(a);n?("sublime"===r&&populateToText(createSublime(n.content,n.trigger,n.scope,n.description)),"brackets"===r&&populateToText(createBrackets(n.content,n.trigger,n.scope,n.description)),"visual_code"===r&&populateToText(createVisualCode(n.content,n.trigger,n.scope,n.description))):(t=!0,toggleInputError("#from-fg",!0,"atom"))}if("sublime"===o){var l=parseSublime(a);if(l){var c=l.find("content"),i=l.find("tabTrigger"),s=l.find("scope"),p=l.find("description");"atom"===r&&populateToText(createAtom(c.text(),i.text(),s.text(),p.text())),"brackets"===r&&populateToText(createBrackets(c.text(),i.text(),s.text(),p.text())),"visual_code"===r&&populateToText(createVisualCode(c.text(),i.text(),s.text(),p.text()))}else t=!0,toggleInputError("#from-fg",!0,"sublime")}if("visual_code"===o){var u=parseVisualCode(a);if(u){var f;for(var m in u)f=u[m];var d="";$.each(f.body,function(e,t){d+=t+"\n"});var g=f.prefix,v=$("select[name=scope_from]").val(),h=f.description;"sublime"===r&&populateToText(createSublime(d,g,v,h)),"atom"===r&&populateToText(createAtom(d,g,v,h)),"brackets"===r&&populateToText(createBrackets(d,g,v,h))}else t=!0,toggleInputError("#from-fg",!0,"viscode")}if("brackets"===o){var b=parseBrackets(a);if(console.log("jsonBracObj? ",b),b){var x=b[0],T=x.template,y=x.trigger,k=x.usage,S=x.description;"sublime"===r&&populateToText(createSublime(T,y,k,S)),"atom"===r&&populateToText(createAtom(T,y,k,S)),"visual_code"===r&&populateToText(createVisualCode(T,y,k,S))}else t=!0,toggleInputError("#from-fg",!0,"brackets")}t||($(".share-overlay").toggle(),$("body").addClass("modal-open"))}),$('[type="submit"]').mouseenter(function(){console.log("Mouse!")}),$('a[href*="#"]:not([href="#"])').click(function(){location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")&&location.hostname!=this.hostname||smoothScroll(this.hash)});
function populateToText(e,t){$(e).val(t)}function createAtom(e,t,o,r){var a="";return a+='".'+o+'":\n   ',a+='"'+r+'":\n       ',a+='"prefix": "'+t+'"\n       ',a+='"body": """'+e+'""" \n       '}function createBrackets(e,t,o,r){var a=[],n={};return n.name=r,n.trigger=t,n.usage=o,n.description=r,n.template=e,a.push(n),JSON.stringify(a)}function createVisualCode(e,t,o,r){var a=new Object;a.prefix=t;var n=e.split("\n"),c="";$.each(n,function(e,t){console.log("body index: "+e+" value: "+t),c+=$.trim(t)+"\n"}),console.log("bodyContent? ",c),a.body=c.split("\n"),console.log("jsonObj body? ",a.body),a.description=r;var l=r,i={};return i[l]=a,JSON.stringify(i)}function createSublime(e,t,o,r){var a="<snippet><content><![CDATA["+e+"]]></content>";return a+="<tabTrigger>"+t+"</tabTrigger>",a+="<scope>"+o+"</scope>",a+="<description>"+r+"</description></snippet>"}function parseAtom(e){console.log("parseAtom snipText first char? ",e.charAt(0));var t=e.charAt(0);if('"'===t||"'"===t){console.log("firstChar is quotation! ",t);var o=new Object;e=e.replace(/"/g,"").replace(/'/g,""),e=$.trim(e),console.log("SnipText? ",e);for(var r=e.split("\n"),a=0;a<r.length;a++){var n=$.trim(r[a]);if(n.startsWith("prefix")){var c=$.trim(n.replace("prefix:",""));console.log("prefix: ",c);var l=$.trim(n.replace(c,""));o.trigger=c}else if(a===r.length-1)if(r.length>4){for(var i="",s=3;s<r.length;s++){var p=r[s];console.log("contentRow? "+p+" idx? "+s),i+=3===s?$.trim(p.replace("body:",""))+"\n":p+"\n"}o.content=i,console.log("snipObj content? "+i+" i? "+a)}else{var c=$.trim(n);o.content=c}else if(1===a){var c=$.trim(n.replace(":",""));o.description=c}else if(0===a){var c=$.trim(n.replace(":",""));o.scope=c.replace(".","")}}return o}}function parseBrackets(e){var t="";try{return console.log("IS valid json: ",""),JSON.parse(e)}catch(e){return void console.log("NOT valid json err: ",e)}}function parseVisualCode(e){var t="";try{return console.log("IS valid json: ",""),JSON.parse(e)}catch(e){return void console.log("NOT valid json err: ",e)}}function parseSublime(e){var t="";try{return console.log("IS valid xmlDoc"),t=$.parseXML(e),$(t)}catch(e){return void console.log("NOT valid xmlDoc err: ",e)}}function toggleInputError(e,t,o){console.log("toggleInputError: "+e+" show? "+t+" type? "+o),t?(o&&$("#error-link").prop("href","details.html#"+o),$(e).addClass("has-error"),$(e).find(".error-block").css("display","block")):($(e).removeClass("has-error"),$(e).find(".error-block").css("display","none"))}function smoothScroll(e){var t=$(e);if(t=t.length?t:$("[name="+e.slice(1)+"]"),t.length)return $("html,body").animate({scrollTop:t.offset().top-80},1e3),!1}$("#convert-from").on("change",function(){var e=$(this).val();console.log("selected? ",e);var t=$("#convert-to"),o=$('#convert-to option[value="'+e+'"]');console.log("toOpt? ",o),t.children().attr("disabled",!1),o.attr("disabled",!0),$(".format").hide(),t.val(""),"visual_code"===e?($(".scope-select").show(),$("select[name=scope_from]").attr("required",!0)):($(".scope-select").hide(),$("select[name=scope_from]").attr("required",!1),$("#format-"+e).show())}),$("#converter-form").submit(function(e){e.preventDefault(),toggleInputError("#from-fg",!1);var t=!1,o=$("select[name=convert_from]").val(),r=$("select[name=convert_to]").val(),a=$("textarea[name=convert_from_text]").val();if("atom"===o){var n=parseAtom(a);n?("sublime"===r&&populateToText("textarea[name=convert_to_text]",createSublime(n.content,n.trigger,n.scope,n.description)),"brackets"===r&&populateToText("textarea[name=convert_to_text]",createBrackets(n.content,n.trigger,n.scope,n.description)),"visual_code"===r&&populateToText("textarea[name=convert_to_text]",createVisualCode(n.content,n.trigger,n.scope,n.description))):(t=!0,toggleInputError("#from-fg",!0,"atom"))}if("sublime"===o){var c=parseSublime(a);if(c){var l=c.find("content"),i=c.find("tabTrigger"),s=c.find("scope"),p=c.find("description");"atom"===r&&populateToText("textarea[name=convert_to_text]",createAtom(l.text(),i.text(),s.text(),p.text())),"brackets"===r&&populateToText("textarea[name=convert_to_text]",createBrackets(l.text(),i.text(),s.text(),p.text())),"visual_code"===r&&populateToText("textarea[name=convert_to_text]",createVisualCode(l.text(),i.text(),s.text(),p.text()))}else t=!0,toggleInputError("#from-fg",!0,"sublime")}if("visual_code"===o){var u=parseVisualCode(a);if(u){var m;for(var v in u)m=u[v];var f="";$.each(m.body,function(e,t){f+=t+"\n"});var g=m.prefix,d=$("select[name=scope_from]").val(),x=m.description;"sublime"===r&&populateToText("textarea[name=convert_to_text]",createSublime(f,g,d,x)),"atom"===r&&populateToText("textarea[name=convert_to_text]",createAtom(f,g,d,x)),"brackets"===r&&populateToText("textarea[name=convert_to_text]",createBrackets(f,g,d,x))}else t=!0,toggleInputError("#from-fg",!0,"viscode")}if("brackets"===o){var h=parseBrackets(a);if(console.log("jsonBracObj? ",h),h){var b=h[0],T=b.template,_=b.trigger,y=b.usage,k=b.description;"sublime"===r&&populateToText("textarea[name=convert_to_text]",createSublime(T,_,y,k)),"atom"===r&&populateToText("textarea[name=convert_to_text]",createAtom(T,_,y,k)),"visual_code"===r&&populateToText("textarea[name=convert_to_text]",createVisualCode(T,_,y,k))}else t=!0,toggleInputError("#from-fg",!0,"brackets")}}),$('[type="submit"]').mouseenter(function(){console.log("Mouse!")}),$('a[href*="#"]:not([href="#"])').click(function(){location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")&&location.hostname!=this.hostname||smoothScroll(this.hash)});